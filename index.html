<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Menu with Paid Ad (Persistent)</title>
<style>
  :root{--neon:#00f3ff;--dark:#001220;--panel:#02182a}
  html,body{height:100%;margin:0;padding:0;font-family:Arial, Helvetica, sans-serif;background:#000;color:#fff;overflow:auto;}
  body{
    background-image:url('A_digital_image_features_an_abstract_cosmic_backgr.png');
    background-size:cover;background-position:center;
  }

  /* canvas stars */
  canvas#bg{position:fixed;inset:0;width:100%;height:100%;z-index:0;pointer-events:none}

  /* main menu 1*/
  #menu{position:relative;z-index:2;height:100vh;display:flex;align-items:center;justify-content:center}
  .menu-box{background:rgba(0,0,0,0.45);border:2px solid rgba(0,255,255,0.12);padding:36px;border-radius:16px;text-align:center;box-shadow:0 8px 40px rgba(0,0,0,0.6);backdrop-filter:blur(6px)}
  h1{margin:0 0 18px 0;font-size:42px;text-shadow:0 0 18px rgba(0,200,255,0.12)}
  .btn{display:inline-block;margin:10px;padding:18px 44px;font-size:20px;font-weight:700;border-radius:12px;border:none;cursor:pointer;transition:transform .18s,box-shadow .18s}
  .btn:active{transform:scale(.98)}
  #spaceBtn{background:linear-gradient(135deg,#7aeaff,#00a3ff);color:#000}
  #clickBtnMenu{background:linear-gradient(135deg,#ffd86b,#ff7a00);color:#000}

  /* bigger square ad board */
  #adBoard{
    position:fixed; right:3%; top:12%;
    width:420px; height:480px; z-index:3; cursor:pointer;
    background:linear-gradient(180deg, rgba(0,0,0,0.9), rgba(2,18,34,0.86));
    border:5px solid rgba(0,243,255,0.24); border-radius:18px; padding:18px;
    box-shadow:0 0 60px rgba(0,240,255,0.16), inset 0 2px 40px rgba(0,0,0,0.5);
    display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;
    transition:transform .18s ease, box-shadow .18s;
  }
  #adBoard:hover{transform:translateY(-6px) scale(1.02); box-shadow:0 0 80px rgba(0,243,255,0.26)}
  #adBoard h3{margin:6px 0;font-size:20px;color:#fff}
  #adBoard p{margin:6px 0;color:#dfeef2}

  /* full-screen modal overlay */
  #packageModal{
    position:fixed; inset:0; z-index:9999; display:none;
    align-items:center; justify-content:center; background:rgba(0,0,0,0.85);
    -webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);
  }
  /* modal content panel */
  .package-panel{
    width:min(94%,980px); max-height:92vh; overflow:auto;
    background:linear-gradient(135deg,var(--panel),#002a3c); border-radius:18px;
    border:3px solid rgba(0,243,255,0.18); padding:28px; position:relative;
    box-shadow:0 20px 80px rgba(0,0,0,0.8);
    transform:translateY(8px); opacity:0; transition:opacity .22s ease, transform .22s ease;
  }
  .package-panel.visible{transform:none;opacity:1}
  #closeModal{
    position:absolute; right:12px; top:10px; background:none;border:0;font-size:28px;color:var(--neon);cursor:pointer;
    padding:6px;border-radius:10px; transition:color .12s;
  }
  #closeModal:hover{color:#ff8080}

  .packages{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin:12px 0}
  .pkg{min-width:170px;padding:12px 14px;border-radius:12px;background:linear-gradient(135deg,#003a4a,#002235);border:2px solid rgba(0,243,255,0.08);text-align:center;cursor:pointer}
  .pkg strong{display:block;margin-bottom:6px;color:var(--neon)}
  .pkg small{color:#ddd}

  .upload-box{margin-top:16px;text-align:center}
  .upload-box input[type=file]{display:block;margin:8px auto}

  /* countdown */
  .countdown{margin-top:8px;font-size:13px;color:#bfefff;font-weight:700}

  /* responsive */
  @media (max-width:820px){ #adBoard{right:6px;top:8%;width:300px;height:380px} }
  @media (max-width:520px){ .menu-box{padding:18px} h1{font-size:26px} .btn{padding:12px 18px;font-size:15px} .package-panel{padding:18px} }
</style>
</head>
<body>

<canvas id="bg"></canvas>

<div id="menu" aria-hidden="false">
  <div class="menu-box">
    <h1>Select Game</h1>
    <button id="spaceBtn" class="btn">Space Game üöÄ</button>
    <button id="clickBtnMenu" class="btn">Click Challenge üñ±Ô∏è</button>
  </div>
</div>

<!-- ad board -->
<div id="adBoard" role="button" aria-label="Buy Ad Space">
  <div id="adContent">
    <h3>Ad Board</h3>
    <p>Thousands of people see this board daily</p>
    <p style="margin-top:18px;color:#a8dff0">Click here to purchase ad space</p>
  </div>
</div>

<!-- modal -->
<div id="packageModal" aria-hidden="true">
  <div class="package-panel" id="panel">
    <button id="closeModal" aria-label="Close">‚úñ</button>
    <h2 style="margin-top:4px;color:var(--neon);text-align:center">Select Package</h2>
    <div class="packages" id="packages">
      <div class="pkg" data-days="1" data-label="1 Day - $10"><strong>1 Day</strong><small>$10</small></div>
      <div class="pkg" data-days="3" data-label="3 Days - $25"><strong>3 Days</strong><small>$25</small></div>
      <div class="pkg" data-days="7" data-label="7 Days - $59"><strong>7 Days</strong><small>$59</small></div>
      <div class="pkg" data-days="30" data-label="30 Days - $199"><strong>30 Days</strong><small>$199</small></div>
      <div class="pkg" data-days="365" data-label="1 Year - $1500"><strong>365 Days</strong><small>$1500</small></div>
    </div>
    <div style="text-align:center;margin-top:8px;color:#cfeffd">
      After selecting a package, upload an image to display on the board for the selected period.
    </div>
    <div class="upload-box" id="uploadBox" style="display:none">
      <input type="file" id="imgUpload" accept="image/*" aria-label="Upload ad image">
      <div style="font-size:13px;color:#bfefff;margin-top:8px">File will be stored locally in this browser only</div>
    </div>
  </div>
</div>

<!-- music toggle + signature -->
<button id="musicToggle" style="position:fixed;top:12px;left:12px;z-index:4;padding:10px 14px;border-radius:10px;border:none;background:linear-gradient(45deg,#00ffcc,#00ccff);font-weight:700;color:#000;cursor:pointer">üéµ Play</button>
<div id="signature" style="position:fixed;bottom:10px;left:12px;z-index:4;color:rgba(255,255,255,0.7)">MADE BY ILAYS</div>

<script>
/* background stars */
const canvas = document.getElementById('bg'); const ctx = canvas.getContext('2d');
function resize(){ canvas.width = innerWidth; canvas.height = innerHeight; }
resize(); addEventListener('resize', resize);
const stars=[]; for(let i=0;i<200;i++){ stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*1.6+0.5,speed:Math.random()*0.35+0.03,alpha:Math.random()*0.6+0.3})}
function draw(){ ctx.clearRect(0,0,canvas.width,canvas.height); for(const s of stars){ ctx.globalAlpha=s.alpha; ctx.beginPath(); ctx.fillStyle='#fff'; ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill(); s.y+=s.speed; if(s.y>canvas.height+10){s.y=-10; s.x=Math.random()*canvas.width;} s.alpha+= (Math.random()-0.5)*0.06; s.alpha=Math.max(.15,Math.min(1,s.alpha)); } ctx.globalAlpha=1; requestAnimationFrame(draw); }
draw();

/* elements */
const adBoard = document.getElementById('adBoard');
const packageModal = document.getElementById('packageModal');
const panel = document.getElementById('panel');
const closeModal = document.getElementById('closeModal');
const packages = document.getElementById('packages');
const uploadBox = document.getElementById('uploadBox');
const imgUpload = document.getElementById('imgUpload');

const MUSIC_URL = "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3";
const audio = new Audio(MUSIC_URL); audio.loop = true; audio.volume = 0.36;
const musicToggle = document.getElementById('musicToggle');
musicToggle.onclick = ()=>{ if(audio.paused){ audio.play().catch(()=>{}); musicToggle.textContent="üîä On"; } else { audio.pause(); musicToggle.textContent="üéµ Play"; } }

/* storage */
const AD_KEY = 'paidAd_v2';
function saveAdToStorage(obj){ try{ localStorage.setItem(AD_KEY, JSON.stringify(obj)); } catch(e){ alert('Upload failed ‚Äî file may be too large.'); } }
function loadAdFromStorage(){ const s = localStorage.getItem(AD_KEY); return s? JSON.parse(s): null; }
function clearAdFromStorage(){ localStorage.removeItem(AD_KEY); }

function setDefaultAdBoard(){
  adBoard.innerHTML = `<div id="adContent"><h3>Ad Board</h3><p>Thousands of people see this board daily</p><p style="margin-top:18px;color:#a8dff0">Click here to purchase ad space</p></div>`;
}

let countdownInterval = null;
function startCountdown(expires){
  stopCountdown();
  function tick(){
    const now = Date.now();
    const rem = expires - now;
    const countdownEl = document.getElementById('adCountdown');
    if(rem <= 0){ stopCountdown(); clearAd(); return; }
    if(countdownEl){ countdownEl.textContent = formatRemaining(rem); }
  }
  tick();
  countdownInterval = setInterval(tick, 1000);
}
function stopCountdown(){ if(countdownInterval){ clearInterval(countdownInterval); countdownInterval = null; } }
function formatRemaining(ms){
  let s = Math.floor(ms/1000);
  const days = Math.floor(s / 86400); s -= days*86400;
  const hours = Math.floor(s/3600); s -= hours*3600;
  const mins = Math.floor(s/60); const secs = s % 60;
  function z(n){ return String(n).padStart(2,'0'); }
  if(days>0) return `${days}d ${z(hours)}:${z(mins)}:${z(secs)}`;
  return `${z(hours)}:${z(mins)}:${z(secs)}`;
}

function showPaidAd(adObj){
  adBoard.innerHTML = `
    <div style="display:flex;flex-direction:column;align-items:center;justify-content:center">
      <h3>Paid Ad (${escapeHtml(adObj.label)})</h3>
      <div style="width:100%;height:70%;display:flex;align-items:center;justify-content:center;margin-top:6px">
        <img src="${adObj.image}" alt="Paid ad" style="max-width:96%;max-height:96%;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.6)">
      </div>
      <div class="countdown" id="adCountdown" aria-live="polite"></div>
    </div>`;
  startCountdown(adObj.expires);
}

function clearAd(){ stopCountdown(); clearAdFromStorage(); setDefaultAdBoard(); }
function escapeHtml(s){ return String(s).replace(/[&<>"]/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;' }[c])); }

(function initFromStorage(){
  const ad = loadAdFromStorage();
  if(ad && ad.expires && ad.expires > Date.now() && ad.image){ showPaidAd(ad); }
  else{ clearAdFromStorage(); setDefaultAdBoard(); }
})();

adBoard.addEventListener('click', () => { openModal(); });
function openModal(){ packageModal.style.display='flex'; requestAnimationFrame(()=> panel.classList.add('visible')); document.documentElement.style.overflow='hidden'; document.body.style.overflow='hidden'; packageModal.setAttribute('aria-hidden','false'); }
function closeModalFunc(){ panel.classList.remove('visible'); setTimeout(()=>{ packageModal.style.display='none'; },220); document.documentElement.style.overflow=''; document.body.style.overflow=''; uploadBox.style.display='none'; packageModal.setAttribute('aria-hidden','true'); }
closeModal.addEventListener('click', closeModalFunc);
packageModal.addEventListener('click',(e)=>{ if(e.target===packageModal) closeModalFunc(); });

let selectedPackage=null;
packages.querySelectorAll('.pkg').forEach(el=>{
  el.addEventListener('click', ()=>{
    packages.querySelectorAll('.pkg').forEach(x=>x.style.boxShadow='');
    el.style.boxShadow='0 8px 30px rgba(0,243,255,0.14) inset';
    const days=Number(el.dataset.days);
    const label=el.dataset.label||`${days} days`;
    selectedPackage={days,label};
    uploadBox.style.display='block';
  });
});

imgUpload.addEventListener('change',(e)=>{
  const file=e.target.files[0];
  if(!file||!selectedPackage) return alert('Select a package first, then choose an image.');
  if(file.size>2*1024*1024){ if(!confirm('File >2MB ‚Äî continue? May fail in local storage.')) return; }
  const reader=new FileReader();
  reader.onload=()=>{
    const dataUrl=reader.result;
    const dayMs=24*60*60*1000;
    const expires=Date.now()+selectedPackage.days*dayMs;
    const adObj={image:dataUrl,label:selectedPackage.label,expires};
    saveAdToStorage(adObj);
    showPaidAd(adObj);
    closeModalFunc();
    imgUpload.value='';
    selectedPackage=null;
  };
  reader.readAsDataURL(file);
});

document.getElementById('spaceBtn').onclick=()=>{ window.location.href='index2.html'; }
document.getElementById('clickBtnMenu').onclick=()=>{ window.location.href='game2.html'; }

/* ===== Account Creation Modal ===== */
if(localStorage.getItem('accountCreated')){ document.getElementById('authModal')?.remove(); }

</script>

<div id="authModal" class="auth-modal">
  <div class="auth-panel">
    <h2>Create Account</h2>
    <div id="authMessage" class="error"></div>
    <input id="username" placeholder="Username">
    <input id="password" type="password" placeholder="Password">
    <input id="passwordConfirm" type="password" placeholder="Confirm Password">
    <button id="createAccountBtn">Create Account</button>
  </div>
</div>

<script>
const btn = document.getElementById('createAccountBtn');
const usernameInput = document.getElementById('username');
const passwordInput = document.getElementById('password');
const passwordConfirmInput = document.getElementById('passwordConfirm');
const messageDiv = document.getElementById('authMessage');

btn.addEventListener('click',()=>{
  const u=usernameInput.value.trim();
  const p=passwordInput.value;
  const p2=passwordConfirmInput.value;
  if(!u||!p||!p2){ messageDiv.textContent='Please fill all fields'; return; }
  if(p!==p2){ messageDiv.textContent='Passwords do not match'; return; }
  const userObj={username:u,password:p};
  localStorage.setItem('accountData',JSON.stringify(userObj));
  localStorage.setItem('accountCreated','true');
  alert('Account created: '+u);
  document.getElementById('authModal').style.display='none';
});
</script>

</body>
</html>
